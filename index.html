<!DOCTYPE html>
<html>
<head>
    <!--Script for getting plotly.js in-->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> 

    <!--Leaflet stylesheet and leaflet script-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>    

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>

</head>

<body>

    <div id="thevizcolumn" style="width:80%; height:400px; float: left; background-color:rgb(247, 200, 224);">
        <p>Cholera</p>
        <div style="width:50%; height:400px; float: left">
        <div id="c_plot" style="width:100%;height:300px;" ></div>
        </div>
    </div>


    <script>
   
    Plotly.d3.tsv("./choleraDeaths.tsv", function(err, rows) {

    function unpack(rows, key) {
    return rows.map(function(row) { return row[key]; });
    }

    var headerNames = Plotly.d3.keys(rows[0]);

    var headerValues = [];
    var cellValues = [];
    for (i = 0; i < headerNames.length; i++) {
    headerValue = [headerNames[i]];
    headerValues[i] = headerValue;
    cellValue = unpack(rows, headerNames[i]);
    cellValues[i] = cellValue;
    }

    // clean date
    for (i = 0; i < cellValues[1].length; i++) {
    var dateValue = cellValues[1][i].split(' ')[0]
    cellValues[1][i] = dateValue
    }


    var data = [{
    type: 'table',
    columnwidth: [150,600,1000,900,600,500,1000,1000,1000],
    columnorder: [0,1,2,3,4,5,6,7,8,9],
    header: {
    values: headerValues,
    align: "center",
    line: {width: 1, color: 'rgb(50, 50, 50)'},
    fill: {color: ['rgb(235, 100, 230)']},
    font: {family: "Arial", size: 8, color: "white"}
    },
    cells: {
    values: cellValues,
    align: ["center", "center"],
    line: {color: "black", width: 1},
    fill: {color: ['rgba(228, 222, 249, 0.65)','rgb(235, 193, 238)', 'rgba(228, 222, 249, 0.65)']},
    font: {family: "Arial", size: 9, color: ["black"]}
    }
    }]

    var layout = {
    title: "Bitcoin mining stats for 180 days"
    }

    Plotly.newPlot('myDiv', data, layout);
    });

</script>
</body>
</html>