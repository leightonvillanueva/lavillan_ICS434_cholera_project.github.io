<!DOCTYPE html>
<html>
<head>
    <!--Script for getting plotly.js in-->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> 

    <!--Leaflet stylesheet and leaflet script-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>    

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>

</head>

<body>

    <div id="thevizcolumn" style="width:80%; height:400px; float: left; background-color:rgb(247, 200, 224);">
        <p>Cholera</p>
        <div style="width:50%; height:400px; float: left">
        <div id="c_plot" style="width:100%;height:300px;" ></div>
        </div>
    </div>


    <script>
   
    Plotly.d3.tsv("./choleraDeaths.tsv", function(data) {processData(data)});
    
    function processData(allRows) {

	console.log(allRows);
	var x = [], y = [];

	for (var i=0; i<allRows.length; i++) {
		row = allRows[i];
		x.push( row['AAPL_x'] );
		y.push( row['AAPL_y'] );
	}
	console.log( 'X',x, 'Y',y, 'SD',standard_deviation );
	makePlotly( x, y, standard_deviation );
}

function makePlotly( x, y, standard_deviation ){
	var plotDiv = document.getElementById("plot");
	var traces = [{
		x: x, 
		y: y
	}];

	Plotly.newPlot('myDiv', traces, 
		{title: 'Plotting CSV data from AJAX call'});
};
  makeplot();


</script>
</body>
</html>